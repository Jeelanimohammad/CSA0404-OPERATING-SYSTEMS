#include <stdio.h>

int main() {
    int diskSize, numFiles, i, j;

    // Input total disk size
    printf("Enter total number of disk blocks: ");
    scanf("%d", &diskSize);

    int disk[diskSize];

    // Initialize disk blocks to 0 (free)
    for(i = 0; i < diskSize; i++)
        disk[i] = 0;

    // Input number of files
    printf("Enter number of files: ");
    scanf("%d", &numFiles);

    int fileSize[numFiles];

    for(i = 0; i < numFiles; i++) {
        printf("\nEnter size of file %d: ", i+1);
        scanf("%d", &fileSize[i]);

        // Try to find free contiguous space automatically
        int found = 0;
        for(j = 0; j <= diskSize - fileSize[i]; j++) {
            int k;
            // Check if all blocks from j to j+fileSize-1 are free
            for(k = j; k < j + fileSize[i]; k++) {
                if(disk[k] != 0)
                    break; // Block occupied
            }

            if(k == j + fileSize[i]) {
                // Found enough contiguous blocks
                for(k = j; k < j + fileSize[i]; k++)
                    disk[k] = i + 1; // Allocate to file i+1
                printf("File %d allocated from block %d to block %d.\n", i+1, j, j + fileSize[i] - 1);
                found = 1;
                break;
            }
        }

        if(!found)
            printf("Error: File %d cannot be allocated. Not enough contiguous space.\n", i+1);
    }

    // Display disk allocation table
    printf("\nDisk Block\tFile Number\n");
    for(i = 0; i < diskSize; i++) {
        printf("%d\t\t", i);
        if(disk[i] != 0)
            printf("%d\n", disk[i]);
        else
            printf("Free\n");
    }

    return 0;
}
