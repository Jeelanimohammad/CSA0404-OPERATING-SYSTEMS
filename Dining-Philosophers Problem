#include <stdio.h>

int chopstick[10];

void wait(int *c) {
    while (*c <= 0);
    (*c)--;
}

void signal(int *c) {
    (*c)++;
}

int main() {
    int n, i;

    printf("Enter number of philosophers: ");
    scanf("%d", &n);

    for(i = 0; i < n; i++)
        chopstick[i] = 1;

    for(i = 0; i < n; i++) {
        printf("Philosopher %d is thinking\n", i);
        wait(&chopstick[i]);
        wait(&chopstick[(i + 1) % n]);
        printf("Philosopher %d is eating\n", i);
        signal(&chopstick[i]);
        signal(&chopstick[(i + 1) % n]);
    }

    return 0;
}
